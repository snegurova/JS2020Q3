(()=>{"use strict";var e={244:(e,t,n)=>{e.exports=n.p+"edf656ba0f00183fd42c.mp3"}},t={};function n(i){if(t[i])return t[i].exports;var l=t[i]={exports:{}};return e[i](l,l.exports,n),l.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{n(244);var e=function e(t,n,i,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.value=t,this.x=n,this.y=i,this.width=l,this.height=l,this.draggable=!1,this.moving=!1,this.startX=null,this.startY=null,this.xPosition=null,this.yPosition=null,this.xPositionAnimated=null,this.yPositionAnimated=null};function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(){function n(e,t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.cells=[],this.cellSize=e,this.cellCount=t,this.totalCellCount=t*t,this.ctx=i,this.clicks=0,this.createCells(this.cellSize,this.cellCount),this.clicksCount=0,this.moves=[],this.dragging=!1,this.cellIsMoving=!1}var i,l;return i=n,(l=[{key:"createCells",value:function(t,n){for(var i=0;i<this.totalCellCount;i++){var l=i%n,o=Math.trunc(i/n);this.cells.push(new e(i===this.totalCellCount-1?0:i+1,l,o,t))}}},{key:"getClicks",value:function(){return this.clicks}},{key:"drawCell",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.ctx.fillStyle=n?"rgba(255, 185, 59, 0.8)":"#FFB93B",this.ctx.fillRect(e+1,t+1,this.cellSize-2,this.cellSize-2)}},{key:"drawNum",value:function(e,t,n){this.ctx.font="bold ".concat(this.cellSize/2,"px Sans"),this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillStyle="#222",this.ctx.fillText(e,t,n)}},{key:"getEmptyCell",value:function(){return this.cells.find((function(e){return 0===e.value}))}},{key:"draw",value:function(){var e=this;this.cells.forEach((function(t,n){t.value>0&&!t.moving&&(e.drawCell(t.x*e.cellSize,t.y*e.cellSize,t.value===n+1),e.drawNum(t.value,t.x*e.cellSize+e.cellSize/2,t.y*e.cellSize+e.cellSize/2))}))}},{key:"move",value:function(e){var t=this,n=this.getEmptyCell(),i="",l=function(){n.value=e.value,e.value=0,t.clicks++,t.moves.push(i),t.cells.forEach((function(e){return e.draggable=!1})),e.x-1>=0&&(t.getCell(e.x-1,e.y).draggable=!0),e.x+1<=t.cellCount-1&&(t.getCell(e.x+1,e.y).draggable=!0),e.y-1>=0&&(t.getCell(e.x,e.y-1).draggable=!0),e.y+1<=t.cellCount-1&&(t.getCell(e.x,e.y+1).draggable=!0)};e.x-1===n.x&&e.y===n.y&&(i="left",l()),e.x+1===n.x&&e.y===n.y&&(i="right",l()),e.y-1===n.y&&e.x===n.x&&(i="up",l()),e.y+1===n.y&&e.x===n.x&&(i="down",l())}},{key:"isWon",value:function(){var e=this;return this.cells.every((function(t,n,i){return t.value===e.totalCellCount-1&&n===e.totalCellCount-2||0===t.value&&n===e.totalCellCount-1||t.value+1===i[n+1].value}))}},{key:"getCell",value:function(e,t){return this.cells.find((function(n){return n.x===e&&n.y===t}))}},{key:"mix",value:function(e){for(var t=function(){return 0===Math.floor(2*Math.random())},n=null,i=null,l=0;l<e;l++){var o=this.getEmptyCell(),a=t(),r=t();a||r||(n=o.x-1,i=o.y),a&&!r&&(n=o.x,i=o.y+1),!a&&r&&(n=o.x+1,i=o.y),a&&r&&(n=o.x,i=o.y-1),0<=n&&n<=this.cellCount-1&&0<=i&&i<=this.cellCount-1&&this.move(this.getCell(n,i))}this.clicks=0}}])&&t(i.prototype,l),n}(),l=document.createElement("div");l.classList.add("info-wrapper"),l.innerHTML='\n  <div  class="timer-wrapper">\n    <div>Time spent</div>\n    <div id ="timer" class="timer">0:00:00</div>\n  </div>\n  <div  class="cells-count-wrapper">\n    <select name="cells-count" id="cells-count">\n      <option value="3">3 x 3</option>\n      <option value="4" selected>4 x 4</option>\n      <option value="5">5 x 5</option>\n      <option value="6">6 x 6</option>\n      <option value="7">7 x 7</option>\n      <option value="8">8 x 8</option>\n    </select>\n  </div>\n  <div  class="moves-wrapper">\n    <div>Moves done</div>\n    <div id ="moves" class="moves">0</div>\n  </div>\n  ',document.body.appendChild(l);var o=document.createElement("div");o.classList.add("controls-wrapper"),o.innerHTML='\n  <div id ="reset-button" class="reset-button" title="Reset/Delete game"></div>\n  <div id ="resume-button" class="resume-button" title="Restore game"></div>\n  <div id ="pause-button" class="pause-button" title="Save game"></div>\n  ',document.body.appendChild(o);var a=document.querySelector("#reset-button"),r=document.querySelector("#pause-button"),c=document.querySelector("#resume-button"),s=document.querySelector("#moves"),u=document.querySelector("#cells-count"),d=u.options[u.selectedIndex].value,v=function(){return window.innerWidth>640?Math.floor(500/d):Math.floor(320/d)},h=v(),m=h*d,g=document.createElement("div");document.body.appendChild(g),g.classList.add("canvas-wrapper");var f=document.createElement("canvas");f.width=m,f.height=m;var p=f.getContext("2d");g.appendChild(f),p.fillRect(0,0,f.width,f.height);var y=new i(h,d,p);y.mix(Math.floor(Math.random()*d*30+Math.pow(d,3))),y.draw();var x=document.createElement("div");function S(e){console.log(y.cellIsMoving);var t=Math.trunc((e.pageX-f.offsetLeft)/y.cellSize),n=Math.trunc((e.pageY-f.offsetTop)/y.cellSize),i=y.getCell(t,n);if(i.draggable){i.moving=!0;var l=y.getEmptyCell();i.xPositionAnimated||(i.xPositionAnimated=i.x*y.cellSize+1),i.yPositionAnimated||(i.yPositionAnimated=i.y*y.cellSize+1);var o=function(e,t){var n=t.x*y.cellSize,i=t.y*y.cellSize;p.fillRect(0,0,f.width,f.height),y.draw(),y.drawCell(e.xPositionAnimated,e.yPositionAnimated,!0),y.drawNum(e.value,e.xPositionAnimated+y.cellSize/2,e.yPositionAnimated+y.cellSize/2),Math.trunc(e.xPositionAnimated/2)===Math.trunc(n/2)||(Math.trunc(e.xPositionAnimated/2)>Math.trunc(n/2)?e.xPositionAnimated-=2:e.xPositionAnimated+=2),Math.trunc(e.yPositionAnimated/2)!==Math.trunc(i/2)&&(Math.trunc(e.yPositionAnimated/2)>Math.trunc(i/2)?e.yPositionAnimated-=2:e.yPositionAnimated+=2),Math.trunc(e.xPositionAnimated/2)===Math.trunc(n/2)&&Math.trunc(e.yPositionAnimated/2)===Math.trunc(i/2)&&(clearInterval(a),e.xPositionAnimated=null,e.yPositionAnimated=null,e.moving=!1,y.move(e),p.fillRect(0,0,f.width,f.height),y.draw(),y.isWon()&&(x.innerHTML="Solved in ".concat(y.getClicks()," moves!")),s.innerText=y.getClicks())}.bind(null,i,l),a=setInterval(o,1)}}x.classList.add("result-wrapper"),document.body.appendChild(x),u.addEventListener("change",(function(){d=u.options[u.selectedIndex].value,y.cellCount=d,y.totalCellCount=d*d,y.cellSize=v(),localStorage.removeItem("movesArray"),localStorage.removeItem("movesCount"),localStorage.removeItem("time"),localStorage.removeItem("cells"),C.innerHTML="0:00:00",y.moves.splice(0),y.clicks=0,y.cells.splice(0),y.createCells(y.cellSize,y.cellCount),m=y.cellSize*d,f.width=m,f.height=m,p.fillRect(0,0,m,m),y.mix(Math.floor(Math.random()*d*30+Math.pow(d,3))),y.draw()})),f.addEventListener("click",S),f.addEventListener("mousedown",(function(e){e.preventDefault(),e.stopPropagation(),f.addEventListener("click",S);var t=Math.trunc((e.pageX-f.offsetLeft)/y.cellSize),n=Math.trunc((e.pageY-f.offsetTop)/y.cellSize),i=Math.trunc(e.pageX-f.offsetLeft),l=Math.trunc(e.pageY-f.offsetTop),o=y.getCell(t,n);o.draggable&&(y.dragging=!0,o.moving=!0,o.startX=i,o.startY=l,o.xPosition=o.x*y.cellSize,o.yPosition=o.y*y.cellSize)})),f.addEventListener("mouseup",(function(e){e.preventDefault(),e.stopPropagation();var t=y.cells.find((function(e){return e.moving}));y.dragging=!1,y.cells.forEach((function(e){e.moving=!1,e.xPosition=null,e.yPosition=null}));var n=Math.trunc((e.pageX-f.offsetLeft)/y.cellSize),i=Math.trunc((e.pageY-f.offsetTop)/y.cellSize),l=y.getEmptyCell();l.x===n&&l.y===i?(y.move(t),s.innerText=y.getClicks(),p.fillRect(0,0,f.width,f.height),y.draw(),y.isWon()&&(x.innerHTML="Solved in ".concat(y.getClicks()," moves!"))):(p.fillRect(0,0,f.width,f.height),y.draw())})),f.addEventListener("mousemove",(function(e){if(y.dragging){e.preventDefault(),e.stopPropagation(),f.removeEventListener("click",S);var t=Math.trunc(e.pageX-f.offsetLeft),n=Math.trunc(e.pageY-f.offsetTop),i=y.cells.find((function(e){return e.moving})),l=t-i.startX,o=n-i.startY;i.xPosition+=l,i.yPosition+=o,p.fillRect(0,0,f.width,f.height),y.draw(),y.drawCell(i.xPosition,i.yPosition,!0),y.drawNum(i.value,i.xPosition+y.cellSize/2,i.yPosition+y.cellSize/2),i.startX=t,i.startY=n}})),a.addEventListener("click",(function(e){e.preventDefault(),localStorage.removeItem("movesArray"),localStorage.removeItem("movesCount"),localStorage.removeItem("time"),localStorage.removeItem("cells"),p.fillRect(0,0,f.width,f.height),y.mix(Math.floor(Math.random()*d*30+Math.pow(d,3))),y.draw(),C.innerHTML="0:00:00",y.moves.splice(0),y.clicks=0,s.innerText=y.getClicks(),x.innerHTML=""})),window.addEventListener("resize",(function(){y.cellSize=v(),m=y.cellSize*d,f.width=m,f.height=m,p.fillRect(0,0,m,m),y.draw()}));var w=null,C=document.querySelector("#timer");function M(){var e=C.innerHTML.split(":"),t=e[0],n=e[1],i=e[2];59===parseInt(i)?(i="00",59===parseInt(n)?(n="00",t++):n=++n<10?"0".concat(n):n):i=++i<10?"0".concat(i):i,C.innerHTML="".concat(t,":").concat(n,":").concat(i)}w=setInterval(M,1e3),r.addEventListener("click",(function(){clearInterval(w),w=null,localStorage.setItem("movesArray",y.moves),localStorage.setItem("movesCount",y.clicks),localStorage.setItem("time",C.innerHTML),localStorage.setItem("cells",JSON.stringify(y.cells))})),c.addEventListener("click",(function(){w||(w=setInterval(M,1e3)),y.moves=localStorage.getItem("movesArray").split(","),C.innerHTML=localStorage.getItem("time"),s.innerHTML=localStorage.getItem("movesCount"),y.cells=JSON.parse(localStorage.getItem("cells")),p.fillRect(0,0,f.width,f.height),y.draw()})),window.addEventListener("DOMContentLoaded",(function(){localStorage.getItem("time")&&(y.moves=localStorage.getItem("movesArray").split(","),C.innerHTML=localStorage.getItem("time"),y.clicks=localStorage.getItem("movesCount"),s.innerHTML=localStorage.getItem("movesCount"),y.cells=JSON.parse(localStorage.getItem("cells")),p.fillRect(0,0,f.width,f.height),y.draw())}))})()})();

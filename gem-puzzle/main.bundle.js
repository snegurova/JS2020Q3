(()=>{"use strict";var e={244:(e,t,i)=>{e.exports=i.p+"edf656ba0f00183fd42c.mp3"}},t={};function i(n){if(t[n])return t[n].exports;var l=t[n]={exports:{}};return e[n](l,l.exports,i),l.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e=i(244),t=function e(t,i,n,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.value=t,this.x=i,this.y=n,this.width=l,this.height=l,this.draggable=!1,this.moving=!1,this.startX=null,this.startY=null,this.xPosition=null,this.yPosition=null,this.xPositionAnimated=null,this.yPositionAnimated=null};function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cells=[],this.cellSize=t,this.cellCount=i,this.totalCellCount=i*i,this.ctx=n,this.clicks=0,this.createCells(this.cellSize,this.cellCount),this.clicksCount=0,this.moves=[],this.dragging=!1,this.cellIsMoving=!1,this.mute=!1}var i,l;return i=e,(l=[{key:"createCells",value:function(e,i){for(var n=0;n<this.totalCellCount;n++){var l=n%i,o=Math.trunc(n/i);this.cells.push(new t(n===this.totalCellCount-1?0:n+1,l,o,e))}}},{key:"getClicks",value:function(){return this.clicks}},{key:"drawCell",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.ctx.fillStyle=i?"rgba(255, 185, 59, 0.8)":"#FFB93B",this.ctx.fillRect(e+1,t+1,this.cellSize-2,this.cellSize-2)}},{key:"drawNum",value:function(e,t,i){this.ctx.font="bold ".concat(this.cellSize/2,"px Sans"),this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillStyle="#222",this.ctx.fillText(e,t,i)}},{key:"getEmptyCell",value:function(){return this.cells.find((function(e){return 0===e.value}))}},{key:"draw",value:function(){var e=this;this.cells.forEach((function(t,i){t.value>0&&!t.moving&&(e.drawCell(t.x*e.cellSize,t.y*e.cellSize,t.value===i+1),e.drawNum(t.value,t.x*e.cellSize+e.cellSize/2,t.y*e.cellSize+e.cellSize/2))}))}},{key:"move",value:function(e,t){var i=this,n=this.getEmptyCell(),l="",o=function(){n.value=e.value,e.value=0,i.clicks++,t||i.moves.push(l),i.cells.forEach((function(e){return e.draggable=!1})),e.x-1>=0&&(i.getCell(e.x-1,e.y).draggable=!0),e.x+1<=i.cellCount-1&&(i.getCell(e.x+1,e.y).draggable=!0),e.y-1>=0&&(i.getCell(e.x,e.y-1).draggable=!0),e.y+1<=i.cellCount-1&&(i.getCell(e.x,e.y+1).draggable=!0)};e.x-1===n.x&&e.y===n.y&&(l="left",o()),e.x+1===n.x&&e.y===n.y&&(l="right",o()),e.y-1===n.y&&e.x===n.x&&(l="up",o()),e.y+1===n.y&&e.x===n.x&&(l="down",o())}},{key:"isWon",value:function(){var e=this;return this.cells.every((function(t,i,n){return t.value===e.totalCellCount-1&&i===e.totalCellCount-2||0===t.value&&i===e.totalCellCount-1||t.value+1===n[i+1].value}))}},{key:"getCell",value:function(e,t){return this.cells.find((function(i){return i.x===e&&i.y===t}))}},{key:"mix",value:function(e){for(var t=function(){return 0===Math.floor(2*Math.random())},i=null,n=null,l=0;l<e;l++){var o=this.getEmptyCell(),a=t(),r=t();a||r||(i=o.x-1,n=o.y),a&&!r&&(i=o.x,n=o.y+1),!a&&r&&(i=o.x+1,n=o.y),a&&r&&(i=o.x,n=o.y-1),0<=i&&i<=this.cellCount-1&&0<=n&&n<=this.cellCount-1&&this.move(this.getCell(i,n))}this.clicks=0;for(var s=0;s<20;s++)this.removeRepeatedMoves()}},{key:"removeRepeatedMoves",value:function(){for(var e=0;e<this.moves.length-1;e++)("left"===this.moves[e]&&"right"===this.moves[e+1]||"right"===this.moves[e]&&"left"===this.moves[e+1]||"up"===this.moves[e]&&"down"===this.moves[e+1]||"down"===this.moves[e]&&"up"===this.moves[e+1])&&(this.moves.splice(e,2),e--)}}])&&n(i.prototype,l),e}(),o=document.createElement("div");o.classList.add("info-wrapper"),o.innerHTML='\n  <div  class="timer-wrapper">\n    <div>Time spent</div>\n    <div id ="timer" class="timer">0:00:00</div>\n  </div>\n  <div  class="cells-count-wrapper">\n    <select name="cells-count" id="cells-count">\n      <option value="3">3 x 3</option>\n      <option value="4" selected>4 x 4</option>\n      <option value="5">5 x 5</option>\n      <option value="6">6 x 6</option>\n      <option value="7">7 x 7</option>\n      <option value="8">8 x 8</option>\n    </select>\n  </div>\n  <div  class="moves-wrapper">\n    <div>Moves done</div>\n    <div id ="moves" class="moves">0</div>\n  </div>\n  ',document.body.appendChild(o);var a=document.createElement("div");a.classList.add("controls-wrapper"),a.innerHTML='\n  <div id ="reset-button" class="btn reset-button" title="Reset/Delete game"></div>\n  <div id ="mute-button" class="btn mute-button" title="Mute"></div>\n  <div id ="solve-button" class="btn solve-button" title="Solve game"></div>\n  <div id ="resume-button" class="btn resume-button" title="Restore game"></div>\n  <div id ="pause-button" class="btn pause-button" title="Save game"></div>\n  ',document.body.appendChild(a);var r=document.querySelector("#reset-button"),s=document.querySelector("#pause-button"),c=document.querySelector("#resume-button"),u=document.querySelector("#solve-button"),d=document.querySelector("#mute-button"),v=document.querySelector("#moves"),m=document.querySelector("#cells-count"),h=m.options[m.selectedIndex].value,g=function(){return window.innerWidth>640?Math.floor(500/h):Math.floor(320/h)},f=g(),p=f*h,y=document.createElement("div");document.body.appendChild(y),y.classList.add("canvas-wrapper");var x=document.createElement("canvas");x.width=p,x.height=p;var S=x.getContext("2d");y.appendChild(x),S.fillRect(0,0,x.width,x.height);var w=new l(f,h,S);w.mix(Math.floor(Math.random()*h*30+Math.pow(h,3))),w.draw();var C=document.createElement("div");C.classList.add("result-wrapper"),document.body.appendChild(C);var M=new Audio(e);function b(e,t,i){var n=e?Math.trunc((e.pageX-x.offsetLeft)/w.cellSize):t.x,l=e?Math.trunc((e.pageY-x.offsetTop)/w.cellSize):t.y,o=e?w.getCell(n,l):t;if(o.draggable){w.mute||M.play(),o.moving=!0;var a=w.getEmptyCell();o.xPositionAnimated||(o.xPositionAnimated=o.x*w.cellSize+1),o.yPositionAnimated||(o.yPositionAnimated=o.y*w.cellSize+1);var r=function(e,t){var n=t.x*w.cellSize,l=t.y*w.cellSize;S.fillRect(0,0,x.width,x.height),w.draw(),w.drawCell(e.xPositionAnimated,e.yPositionAnimated,!0),w.drawNum(e.value,e.xPositionAnimated+w.cellSize/2,e.yPositionAnimated+w.cellSize/2),Math.trunc(e.xPositionAnimated/2)===Math.trunc(n/2)||(Math.trunc(e.xPositionAnimated/2)>Math.trunc(n/2)?e.xPositionAnimated-=2:e.xPositionAnimated+=2),Math.trunc(e.yPositionAnimated/2)!==Math.trunc(l/2)&&(Math.trunc(e.yPositionAnimated/2)>Math.trunc(l/2)?e.yPositionAnimated-=2:e.yPositionAnimated+=2),Math.trunc(e.xPositionAnimated/2)===Math.trunc(n/2)&&Math.trunc(e.yPositionAnimated/2)===Math.trunc(l/2)&&(clearInterval(s),e.xPositionAnimated=null,e.yPositionAnimated=null,e.moving=!1,w.move(e,i),S.fillRect(0,0,x.width,x.height),w.draw(),w.isWon()&&(C.innerHTML="Solved in ".concat(w.getClicks()," moves!")),v.innerText=w.getClicks())}.bind(null,o,a),s=setInterval(r,1)}}d.addEventListener("click",(function(){d.classList.toggle("active"),w.mute=!w.mute})),m.addEventListener("change",(function(){h=m.options[m.selectedIndex].value,w.cellCount=h,w.totalCellCount=h*h,w.cellSize=g(),localStorage.removeItem("movesArray"),localStorage.removeItem("movesCount"),localStorage.removeItem("time"),localStorage.removeItem("cells"),P.innerHTML="0:00:00",w.moves.splice(0),w.clicks=0,w.cells.splice(0),w.createCells(w.cellSize,w.cellCount),p=w.cellSize*h,x.width=p,x.height=p,S.fillRect(0,0,p,p),w.mix(Math.floor(Math.random()*h*30+Math.pow(h,3))),w.draw()})),x.addEventListener("click",b),x.addEventListener("mousedown",(function(e){e.preventDefault(),e.stopPropagation(),x.addEventListener("click",b);var t=Math.trunc((e.pageX-x.offsetLeft)/w.cellSize),i=Math.trunc((e.pageY-x.offsetTop)/w.cellSize),n=Math.trunc(e.pageX-x.offsetLeft),l=Math.trunc(e.pageY-x.offsetTop),o=w.getCell(t,i);o.draggable&&(w.dragging=!0,o.moving=!0,o.startX=n,o.startY=l,o.xPosition=o.x*w.cellSize,o.yPosition=o.y*w.cellSize)})),x.addEventListener("mouseup",(function(e){e.preventDefault(),e.stopPropagation();var t=w.cells.find((function(e){return e.moving}));w.dragging=!1,w.cells.forEach((function(e){e.moving=!1,e.xPosition=null,e.yPosition=null}));var i=Math.trunc((e.pageX-x.offsetLeft)/w.cellSize),n=Math.trunc((e.pageY-x.offsetTop)/w.cellSize),l=w.getEmptyCell();l.x===i&&l.y===n?(w.move(t),v.innerText=w.getClicks(),S.fillRect(0,0,x.width,x.height),w.draw(),w.isWon()&&(C.innerHTML="Solved in ".concat(w.getClicks()," moves!"))):(S.fillRect(0,0,x.width,x.height),w.draw())})),x.addEventListener("mousemove",(function(e){if(w.dragging){e.preventDefault(),e.stopPropagation(),x.removeEventListener("click",b);var t=Math.trunc(e.pageX-x.offsetLeft),i=Math.trunc(e.pageY-x.offsetTop),n=w.cells.find((function(e){return e.moving})),l=t-n.startX,o=i-n.startY;n.xPosition+=l,n.yPosition+=o,S.fillRect(0,0,x.width,x.height),w.draw(),w.drawCell(n.xPosition,n.yPosition,!0),w.drawNum(n.value,n.xPosition+w.cellSize/2,n.yPosition+w.cellSize/2),n.startX=t,n.startY=i}})),u.addEventListener("click",(function e(){u.removeEventListener("click",e);var t=w.getEmptyCell(),i=w.moves.length-1,n=null;"left"===w.moves[i]&&(n=w.getCell(t.x-1,t.y)),"right"===w.moves[i]&&(n=w.getCell(t.x+1,t.y)),"up"===w.moves[i]&&(n=w.getCell(t.x,t.y-1)),"down"===w.moves[i]&&(n=w.getCell(t.x,t.y+1)),w.moves.pop(),t=n,b(null,n,!0),w.moves.length?setTimeout(e,350):u.addEventListener("click",e)})),r.addEventListener("click",(function(e){e.preventDefault(),localStorage.removeItem("movesArray"),localStorage.removeItem("movesCount"),localStorage.removeItem("time"),localStorage.removeItem("cells"),S.fillRect(0,0,x.width,x.height),w.mix(Math.floor(Math.random()*h*30+Math.pow(h,3))),w.draw(),P.innerHTML="0:00:00",w.moves.splice(0),w.clicks=0,v.innerText=w.getClicks(),C.innerHTML=""})),window.addEventListener("resize",(function(){w.cellSize=g(),p=w.cellSize*h,x.width=p,x.height=p,S.fillRect(0,0,p,p),w.draw()}));var L=null,P=document.querySelector("#timer");function k(){var e=P.innerHTML.split(":"),t=e[0],i=e[1],n=e[2];59===parseInt(n)?(n="00",59===parseInt(i)?(i="00",t++):i=++i<10?"0".concat(i):i):n=++n<10?"0".concat(n):n,P.innerHTML="".concat(t,":").concat(i,":").concat(n)}L=setInterval(k,1e3),s.addEventListener("click",(function(){clearInterval(L),L=null,localStorage.setItem("movesArray",w.moves),localStorage.setItem("movesCount",w.clicks),localStorage.setItem("time",P.innerHTML),localStorage.setItem("cells",JSON.stringify(w.cells))})),c.addEventListener("click",(function(){L||(L=setInterval(k,1e3)),w.moves=localStorage.getItem("movesArray").split(","),P.innerHTML=localStorage.getItem("time"),v.innerHTML=localStorage.getItem("movesCount"),w.cells=JSON.parse(localStorage.getItem("cells")),S.fillRect(0,0,x.width,x.height),w.draw()})),window.addEventListener("DOMContentLoaded",(function(){localStorage.getItem("time")&&(w.moves=localStorage.getItem("movesArray").split(","),P.innerHTML=localStorage.getItem("time"),w.clicks=localStorage.getItem("movesCount"),v.innerHTML=localStorage.getItem("movesCount"),w.cells=JSON.parse(localStorage.getItem("cells")),S.fillRect(0,0,x.width,x.height),w.draw())}))})()})();
